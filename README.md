# React Admin Template

ğŸ‰ A magical react admin template supporting electron.

<div align="center">
	<a href="https://github.com/malakirti/react-admin-template#react-admin-template">
  	<img width="100%" align="center" src="https://github-readme-stats.vercel.app/api/pin/?username=malakirti&repo=react-admin-template&show_owner=true&theme=radical" alt="package">
	</a>
</div>

<div align="center">
	<a href="https://github.com/malakirti/react-admin-template">
		<img align="center" src="https://img.shields.io/github/package-json/name/malakirti/react-admin-template?logo=github" alt="name">
	</a>
	<a href="https://github.com/malakirti/react-admin-template">
		<img align="center" src="https://img.shields.io/github/package-json/v/malakirti/react-admin-template?label=github%40latest&logo=github" alt="version">
	</a>
</div>

<div align="center">
	<a href="https://github.com/malakirti/react-admin-template/blob/main/package.json">
		<img align="center" src="https://img.shields.io/github/package-json/dependency-version/malakirti/react-admin-template/react?logo=react" alt="react">
	</a>
	<a href="https://github.com/malakirti/react-admin-template/blob/main/package.json">
		<img align="center" src="https://img.shields.io/github/package-json/dependency-version/malakirti/react-admin-template/react-dom?logo=react" alt="react-dom">
	</a>
	<a href="https://github.com/malakirti/react-admin-template/blob/main/package.json">
		<img align="center" src="https://img.shields.io/github/package-json/dependency-version/malakirti/react-admin-template/react-router?logo=react-router" alt="react-router">
	</a>
	<a href="https://github.com/malakirti/react-admin-template/blob/main/package.json">
		<img align="center" src="https://img.shields.io/github/package-json/dependency-version/malakirti/react-admin-template/@reduxjs/toolkit?logo=redux" alt="@reduxjs/toolkit">
	</a>
	<a href="https://github.com/malakirti/react-admin-template/blob/main/package.json">
		<img align="center" src="https://img.shields.io/github/package-json/dependency-version/malakirti/react-admin-template/antd?logo=Ant%20Design" alt="Ant Design">
	</a>
</div>

<div align="center">
	<a href="https://github.com/malakirti/react-admin-template">
		<img align="center" src="https://img.shields.io/github/languages/count/malakirti/react-admin-template?logo=github" alt="languages count">
	</a>
	<a href="https://github.com/malakirti/react-admin-template">
		<img align="center" src="https://img.shields.io/github/languages/top/malakirti/react-admin-template?logo=typescript" alt="top language">
	</a>
	<a href="https://github.com/malakirti/react-admin-template">
		<img align="center" src="https://img.shields.io/github/repo-size/malakirti/react-admin-template?logo=github" alt="repo size">
	</a>
	<a href="https://github.com/malakirti/react-admin-template">
		<img align="center" src="https://img.shields.io/github/languages/code-size/malakirti/react-admin-template?logo=github" alt="code size">
	</a>
	<a href="https://github.com/malakirti/react-admin-template/commits/main">
		<img align="center" src="https://img.shields.io/github/commit-activity/y/malakirti/react-admin-template?logo=github" alt="commit activity">
	</a>
	<a href="https://github.com/malakirti/react-admin-template/blob/main/LICENSE#L3">
		<img align="center" src="https://img.shields.io/github/license/malakirti/react-admin-template?logo=github" alt="license">
	</a>
</div>
<p></p>

ä¸ªäººè‡ªç”¨ React é¡¹ç›®å¼€å‘æ¨¡æ¿ï¼ŒåŒæ—¶é›†æˆ Electron æ”¯æŒã€‚
é»˜è®¤ä½¿ç”¨`TypeScript`å¼€å‘ï¼Œè‹¥ä½¿ç”¨`JavaScript`å¼€å‘ï¼Œéœ€æ³¨æ„`tsconfig.json`ä¸­`allowJs`é…ç½®ã€‚
æœ¬åˆ†æ”¯ä½œä¸ºé¡¹ç›®å¿«é€Ÿå¯åŠ¨æ¨¡æ¿ï¼Œä¸ä¼šè¿‡å¤šæäº¤ä»£ç ï¼Œåªæä¾›åŸºç¡€æ¨¡æ¿ã€‚

**æ³¨æ„äº‹é¡¹**

1. **æœ¬é¡¹ç›®æ¨¡æ¿åŒæ—¶å¼•å…¥äº†`Redux`å’Œ`Mobx`çš„æ¼”ç¤ºï¼Œä»…æä¾›å¼€å§‹å‰çš„é€‰æ‹©æ¼”ç¤ºï¼Œæ‰€ä»¥åˆ‡å¿ŒäºŒè€…åŒæ—¶ä½¿ç”¨ã€‚**
2. **åˆ é™¤å…¶ä¸­ä¸€ä¸ªå¾ˆå®¹æ˜“ï¼Œåœ¨`src/app.tsx`ä¸­`MobxProvider`å’Œ`ReduxProvider`äºŒé€‰ä¸€å³å¯**
3. **è·¯ç”±æƒé™æ•°æ®ä½¿ç”¨äº†reduxçš„çŠ¶æ€ï¼Œæ ¹æ®é€‰æ‹©ä¿®æ”¹ï¼Œå…¥å£åœ¨`src/layout/index.tsx`**
4. **æ¼”ç¤ºé¡µé¢æ–‡ä»¶åœ¨`src/pages/store-test`ç›®å½•ï¼Œå¯¹åº”è·¯ç”±åœ¨`src/router/tests.tsx`æ–‡ä»¶ï¼Œç›´æ¥åˆ é™¤å³å¯**
5. **ç„¶åé€‰æ‹©æ€§åˆ é™¤`src/mobx`ç›®å½•æˆ–`src/redux`ç›®å½•ã€‚**
6. **è‹¥é€‰æ‹©`Mobx`ï¼Œè¯·å°†`@reduxjs/toolkit`ã€`react-redux`ã€`reselect`å¸è½½ï¼Œåä¹‹è¯·å°†`mobx`ã€`mobx-react`å¸è½½**
7. **æ ‡ç­¾é¡µç»„ä»¶`TabsBar(src/layout/base-layout/components/tabs-bar)`ä¾èµ–äº†`redux`çš„çŠ¶æ€ï¼Œä½¿ç”¨`mobx`è¯·è‡ªè¡Œæ”¹é€ **

## ä¸€. æœ¬åœ°å¼€å‘

```shell script
# å®‰è£…ä¾èµ–
> yarn # npm install

# å¯åŠ¨å‰ä¼šæ„å»ºdll
> yarn start # npm run start

# å¯åŠ¨ä¸ä¼šæ„å»ºdllï¼Œä¹‹å‰å­˜åœ¨å°±ç”¨
> yarn dev # npm run dev

# å¯åŠ¨electronå¼€å‘ç¯å¢ƒ
> yarn electron # npm run electron
```

## äºŒ. ä»£ç é£æ ¼

æœ¬é¡¹ç›®å¯¹ä»£ç é£æ ¼æœ‰ä¸€å®šçš„è¦æ±‚ï¼Œå…·ä½“å‚è€ƒ`.eslintrc.js`ã€`.stylelintrc.js`ã€`.prettierrc.js`æ–‡ä»¶é…ç½®ã€‚

## ä¸‰. æäº¤è§„èŒƒ

é¡¹ç›®æäº¤å‰ä¼šå¯¹`commit message`è¿›è¡Œæ£€æŸ¥ï¼Œä¸ç¬¦åˆè§„èŒƒæäº¤ä¼šè¢«æ‹’ç»ã€‚`commit message`æ ¼å¼å¦‚ä¸‹ï¼š

```
> type(scope?): subject // scopeå¯é€‰
```

æäº¤çš„ `type` å¯é€‰å€¼å¦‚ä¸‹:

```javascript
[
 'build',
 'ci',
 'chore',
 'docs',
 'feat',
 'fix', 
 'perf',
 'refactor',
 'revert',
 'style',
 'test',
]
```

## å››. æ‰“åŒ…æ„å»º

ä¸ºäº†äº’ä¸å½±å“ï¼Œ`web`ä»£ç æ‰“åŒ…å†`dist`ç›®å½•ï¼Œ`electron`ä»£ç æ‰“åŒ…åœ¨`build`ç›®å½•ï¼Œå…¶ä¸­æ¸²æŸ“è¿›ç¨‹ä»£ç å…¨éƒ¨åœ¨`build/render`ç›®å½•ã€‚

### ç¯å¢ƒå˜é‡è¯´æ˜

ä¸€äº›`BuiltIns`ã€`Plugins`ã€`Loader`çš„ç¯å¢ƒå˜é‡é»˜è®¤å€¼æ˜¯`process.env.NODE_ENV`ï¼Œ
ä½†æ˜¯è‡ªå®¶ CI æ²¡å¾—å•†é‡åªä¼ é€’ä¸€ä¸ªç¯å¢ƒå˜é‡`NODE_ENV`ä¸”ä¼šè¶…å‡º`development`ã€`test`ã€`production`èŒƒå›´ï¼Œ
åŒæ—¶ä¸ºäº†å˜é‡æ‰©å±•ï¼Œæ­¤é¡¹ç›®`BABEL_ENV`ã€`NODE_ENV`å·²å›ºå®šä¸º`development`ã€`production`ã€‚
ä¹Ÿå°±æ˜¯è¯´æ— è®º`NODE_ENV`ä¼ é€’ä»€ä¹ˆå€¼éƒ½ä¼šåœ¨èµ‹å€¼ç»™`BUILD_ENV`åè¢«å¼ºåˆ¶çŸ«æ­£ä¸º`development`æˆ–`production`ã€‚

**æ‰€ä»¥æœ¬æ¨¡æ¿ä¸­è¯·ä½¿ç”¨`BUILD_ENV`æ¥åŒºåˆ†ç¯å¢ƒï¼Œ`process.env.NODE_ENV`ä¸å†ä½¿ç”¨**

### æ‰“åŒ…å‘½ä»¤

> æœ¬æ¨¡æ¿å†…ç½®`electron`æ‰“åŒ…æ”¯æŒã€‚

```shell script
# webæ‰“åŒ…ï¼Œé»˜è®¤ç”Ÿäº§ç¯å¢ƒ
> yarn build # npm run build

# electronæ‰“åŒ…ï¼Œé»˜è®¤ç”Ÿäº§ç¯å¢ƒ
> yarn package # npm run package

# electronæ‰“åŒ…ï¼Œä»…æ‰“åŒ…
> yarn package:only # npm run package:only
```

## äº”. å…³äº Electron

æœ¬æ¨¡æ¿å†…ç½®äº†`electron`ç›¸å…³åŠŸèƒ½ï¼Œä¸ºäº†æ–¹ä¾¿ä¸éœ€è¦`electron`çš„é¡¹é¡¹ç›®å¹¶æ²¡æœ‰å°†ä¸»è¿›ç¨‹ä»£ç å’Œæ¸²æŸ“è¿›ç¨‹ä»£ç æ”¾ç½®ä¸€èµ·ã€‚
ç›®å½•ç»“æ„æ ¹æ®éœ€è¦å¯ä»¥è½»æ¾è‡ªè¡Œè°ƒæ•´ï¼Œåªéœ€è°ƒæ•´`.scripts/config/paths.js`æ–‡ä»¶ç›¸å…³å˜é‡å³å¯è½»æ¾æå®šã€‚

### ä¸éœ€è¦`electron`

> å¦‚æœä¸éœ€è¦`electron`åˆä¸æƒ³å…¶ç•™åœ¨é¡¹ç›®ä¸­ï¼Œæ“ä½œå¦‚ä¸‹:

1. åˆ é™¤`tsconfig.json`ä¸­`include`æ•°ç»„çš„`main`ç›®å½•é…ç½®å’Œ`paths`å¯¹è±¡ä¸­çš„`~/*`
2. åˆ é™¤`.scripts/config/index.js`ã€`.scripts/config/paths.js`ä¸­ electron ç›¸å…³ç›®å½•é…ç½®ï¼Œæœ‰æ³¨é‡Š
3. åˆ é™¤`.scripts/electron`æ–‡ä»¶å¤¹`
4. åˆ é™¤`public/main`ç›®å½•
5. åˆ é™¤`package.json`æ–‡ä»¶ä¸­`scripts`å¯¹è±¡çš„`electron`ç›¸å…³å‘½ä»¤
6. åˆ é™¤æ ¹ç›®å½•ä¸‹`electron.config.js`æ–‡ä»¶
7. å¸è½½`package.json`æ–‡ä»¶ä¸­çš„ä¾èµ–
	1. `electron`
	2. `node-loader`
	3. `electron-debug`
	4. `electron-devtools-installer`
	5. `@types/electron-devtools-installer`
	6. `electron-builder`

```shell script
> yarn remove electron node-loader electron-debug electron-devtools-installer @types/electron-devtools-installer electron-builder electron-updater electron-log

# or

> npm uninstall electron node-loader electron-debug electron-devtools-installer @types/electron-devtools-installer electron-builder electron-updater electron-log
```

8. done

ä»¥ä¸Šæ“ä½œç»å®è·µæš‚æ— é—®é¢˜ï¼Œå¦‚æœ‰é—®é¢˜è¯·å…ˆæŸ¥çœ‹æ§åˆ¶å°é”™è¯¯è¾“å‡ºã€‚

### éœ€è¦`electron`ä¸”éœ€é€‚å½“æ”¹é€ 

> å¦‚æœå¸Œæœ›å°†ä¸»è¿›ç¨‹ã€æ¸²æŸ“è¿›ç¨‹æ”¾ç½®äºåŒä¸€ç›®å½•(ä»¥`src`ä¸ºä¾‹ï¼Œæ¸²æŸ“è¿›ç¨‹ä»£ç `src/render`ï¼Œä¸»è¿›ç¨‹ä»£ç (`src/main`)ï¼Œæ“ä½œå¦‚ä¸‹:

1. åˆ é™¤`tsconfig.json`ä¸­`include`æ•°ç»„çš„`main`ç›®å½•é…ç½®ï¼Œå°†`src`æ›¿æ¢ä¸º`src/render`
2. å°†`tsconfig.json`ä¸­çš„`paths: { "~/*": ["./main/*"], "@/*": ["./src/*"] }`å¯¹è±¡ä¿®æ”¹ä¸º`paths: { "~/*": ["./src/main/*"], "@/*": ["./src/render/*"] }`
3. `src`ç›®å½•ä¸­æ–°å»º`render`å­ç›®å½•ï¼Œå°†`src`ç›®å½•ä¸­åŸæœ‰æ‰€æœ‰æ–‡ä»¶ç§»åŠ¨åˆ°`src/render`ç›®å½•
4. å°†`main`ç›®å½•ç§»åŠ¨åˆ°`src`ç›®å½•ä¸`render`ç›®å½•åŒçº§
5. ä¿®æ”¹`.scripts/config/paths.js`ç›¸å…³é…ç½®ï¼Œå°†`src`ä¿®æ”¹ä¸º`src/render`ï¼Œå°†`main`ä¿®æ”¹ä¸º`src/main`
6. ä¿®æ”¹`electron.config.js`æ–‡ä»¶ç›¸å…³ç›®å½•æŒ‡å‘
7. done

## TODO

* ä¸»è¿›ç¨‹ä»£ç ä¿®æ”¹åå¦‚ä½•æ‰èƒ½åƒæ¸²æŸ“è¿›ç¨‹ä»£ç ä¸€æ ·çƒ­åŠ è½½ï¼Œè€Œä¸æ˜¯æ¯æ¬¡é‡æ–°å¯åŠ¨ç¨‹åº
* æ·»åŠ electronå®‰è£…åŒ…æ›´æ–°åŠŸèƒ½
